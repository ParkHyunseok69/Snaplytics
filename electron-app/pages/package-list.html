<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snaplytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles/main.css">

    <style>
        * {
            font-family: 'Montserrat', sans-serif;
        }
        
        .font-segoe {
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background-color: #9BB5BC;
        }

        .sidebar {
            width: 278px;
            background: linear-gradient(to bottom, #165166, #0d3d4d);
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.25);
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            z-index: 50;
        }

        .sidebar-open .sidebar {
            transform: translateX(0);
        }

        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
                width: 100%;
                max-width: 278px;
            }
        }

        .sidebar.mobile-open {
            transform: translateX(0) !important;
        }

        .main-content {
            margin-left: 278px;
        }

        @media (max-width: 1024px) {
            .main-content {
                margin-left: 0;
            }
        }

        .header {
            height: 102px;
            background: white;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.25);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            height: 50px;
            padding: 0 24px;
            font-weight: 700;
            font-size: 16px;
            color: #F6EFE3;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.25);
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-item.active {
            background: white;
            color: #165166;
            text-shadow: none;
        }

        .mobile-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }

        .mobile-overlay.show {
            display: block;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        @media (max-width: 640px) {
            .logo-text {
                display: none;
            }
        }

        .chart-container {
            position: relative;
            height: 300px;
            max-height: 400px;
        }

        @media (max-width: 1024px) {
            .chart-container {
                height: 250px;
            }
        }

        .menu-icon {
            width: 24px;
            height: 24px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
        }

        .menu-icon span {
            width: 100%;
            height: 2px;
            background: #4F6E79;
            transition: all 0.3s ease;
        }

        .close-btn {
            position: absolute;
            right: 16px;
            top: 16px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: none;
        }

        @media (max-width: 1024px) {
            .close-btn {
                display: block;
            }
        }

        .sidebar-active {
            background: #8a88a7;
        }
    </style>
</head>
<body class="bg-[#9BB5BC]">
    <!-- Mobile Overlay -->
    <div id="mobileOverlay" class="mobile-overlay"></div>

    <div id="sidebar" class="sidebar">
        <button class="close-btn" onclick="toggleMobileSidebar(false)">✕</button>
        
        <div class="flex flex-col items-center gap-3 pt-6 pb-8">
            <img src="https://api.builder.io/api/v1/image/assets/TEMP/0fdade257f0aa6c53979aa05f0c346a41b70e926?width=475" alt="Heigen Logo" class="w-[220px] h-[90px]">
        </div>

        <nav class="flex flex-col w-full px-6 gap-[18px] flex-1 overflow-y-auto">
            <div class="flex flex-col gap-0">
                    <a href="dashboard.html" id="nav-dashboard"
                       class="flex items-center gap-3 px-4 py-3 rounded-lg text-[#F6EFE3] font-bold text-sm hover:bg-[#F6EFE3] hover:text-[#165166] transition-colors">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_521_1728)">
                                <path d="M3 21.976C2.73478 21.976 2.48043 21.8706 2.29289 21.6831C2.10536 21.4956 2 21.2412 2 20.976V0H0V20.976C0 21.7716 0.31607 22.5347 0.87868 23.0973C1.44129 23.6599 2.20435 23.976 3 23.976H24V21.976H3Z" fill="currentColor"/>
                                <path d="M7 12H5V19H7V12Z" fill="currentColor"/>
                                <path d="M12 9.99988H10V18.9999H12V9.99988Z" fill="currentColor"/>
                                <path d="M17 12.9999H15V18.9999H17V12.9999Z" fill="currentColor"/>
                                <path d="M22 9H20V19H22V9Z" fill="currentColor"/>
                                <path d="M11 4.41397L16 9.41397L23.707 1.70697L22.293 0.292969L16 6.58597L11 1.58597L5.29297 7.29297L6.70697 8.70697L11 4.41397Z" fill="currentColor"/>
                            </g>
                        </svg>
                        Dashboard
                    </a>
                
                    <a href="customers.html" id="nav-customers"
                       class="flex items-center gap-3 px-4 py-3 rounded-lg text-[#F6EFE3] font-bold text-sm hover:bg-[#F6EFE3] hover:text-[#165166] transition-colors">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4.5 17H4C3.44772 17 3 16.5523 3 16C3 14.3431 4.34315 13 6 13H7M7 9.94999C5.85888 9.71836 5 8.70948 5 7.5C5 6.11929 6.11929 5 7.5 5C8.06291 5 8.58237 5.18604 9.00024 5.5M19.5002 17H20.0002C20.5525 17 21.0002 16.5523 21.0002 16C21.0002 14.3431 19.6571 13 18.0002 13H17.0002M17.0002 9.94999C18.1414 9.71836 19.0002 8.70948 19.0002 7.5C19.0002 6.11929 17.881 5 16.5002 5C15.9373 5 15.4179 5.18604 15 5.5M15.5 19H8.5C7.94771 19 7.5 18.5523 7.5 18C7.5 16.3431 8.84314 15 10.5 15H13.5C15.1569 15 16.5 16.3431 16.5 18C16.5 18.5523 16.0523 19 15.5 19ZM14.5 9.5C14.5 10.8807 13.3807 12 12 12C10.6193 12 9.5 10.8807 9.5 9.5C9.5 8.11929 10.6193 7 12 7C13.3807 7 14.5 8.11929 14.5 9.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Customer Data
                    </a>
                
                    <a href="packages.html"" id="nav-packages"
                       class="sidebar-active flex items-center gap-3 px-4 py-3 rounded-lg text-[#F6EFE3] font-bold text-sm hover:bg-[#F6EFE3] hover:text-[#165166] transition-colors">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 4H18C18.5523 4 19 4.44772 19 5V20C19 20.5523 18.5523 21 18 21H6C5.44772 21 5 20.5523 5 20V5C5 4.44772 5.44772 4 6 4H9M9 7H15M9 12H15M9 16H15M10 3V7H14V3H10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Package List
                    </a>
                
                    <a href="#" class="flex items-center gap-3 px-4 py-3 rounded-lg text-[#F6EFE3] font-bold text-sm hover:bg-[#F6EFE3] hover:text-[#165166] transition-colors">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 5V4C18 3.44772 17.5523 3 17 3H8.91421C8.649 3 8.39464 3.10536 8.20711 3.29289L4.29289 7.20711C4.10536 7.39464 4 7.649 4 7.91421V20C4 20.5523 4.44772 21 5 21H17C17.5523 21 18 20.5523 18 20V15M9 3V7C9 7.55228 8.55228 8 8 8H4M15.383 8.77198L18.128 11.518M19.343 7.61198C19.537 7.8058 19.6909 8.03597 19.796 8.28932C19.901 8.54267 19.955 8.81423 19.955 9.08848C19.955 9.36273 19.901 9.63429 19.796 9.88764C19.6909 10.141 19.537 10.3712 19.343 10.565L12.693 17.211L9 17.95L9.739 14.258L16.385 7.61198C16.5789 7.4172 16.8094 7.26265 17.0632 7.15719C17.317 7.05173 17.5892 6.99744 17.864 6.99744C18.1388 6.99744 18.411 7.05173 18.6648 7.15719C18.9186 7.26265 19.1491 7.4172 19.343 7.61198Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Survey Form
                    </a>
            </div>

            <div class="w-full h-px bg-white/20 my-2"></div>

            <div class="flex flex-col gap-0">
                    <a href="profile.html" id="nav-profile" class="flex items-center gap-3 px-4 py-3 rounded-lg text-[#F6EFE3] font-bold text-sm hover:bg-[#F6EFE3] hover:text-[#165166] transition-colors">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM12 21C13.7608 21.0019 15.483 20.4843 16.951 19.512C16.835 18.5451 16.3691 17.6541 15.6412 17.0071C14.9133 16.3601 13.9739 16.0019 13 16H11C10.0261 16.0019 9.08665 16.3601 8.35879 17.0071C7.63092 17.6541 7.16502 18.5451 7.049 19.512C8.51698 20.4843 10.2392 21.0019 12 21ZM15 10C15 11.6569 13.6569 13 12 13C10.3431 13 9 11.6569 9 10C9 8.34315 10.3431 7 12 7C13.6569 7 15 8.34315 15 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Profile
                    </a>
                
                    <a href="#" onclick="logout()" class="flex items-center gap-3 px-4 py-3 rounded-lg text-[#F6EFE3] font-bold text-sm hover:bg-[#F6EFE3] hover:text-[#165166] transition-colors">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.35294 16.2V18.3C9.35294 18.8569 9.57605 19.3911 9.97319 19.7849C10.3703 20.1787 10.909 20.4 11.4706 20.4L18.8824 20.4C19.444 20.4 19.9826 20.1787 20.3798 19.7849C20.7769 19.3911 21 18.8569 21 18.3L21 5.69998C21 5.14302 20.7769 4.60888 20.3798 4.21505C19.9826 3.82123 19.444 3.59998 18.8824 3.59998L11.4706 3.59998C10.909 3.59998 10.3703 3.82123 9.97319 4.21505C9.57605 4.60888 9.35294 5.14302 9.35294 5.69998V7.79998M15.7059 12L3 12M3 12L6.17647 15.15M3 12L6.17647 8.84998" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Logout
                    </a>
            </div>
        </nav>
    </div>
    <!-- Main Content -->
        <div class="flex-1 ml-[278px]">
            <!-- Header -->
            <header class="bg-white shadow-[0_0_25px_0_rgba(0,0,0,0.25)] h-[102px] flex items-center justify-between px-8">
                <button onclick="goBackToPackages()" class="inline-flex items-center gap-2 hover:opacity-80">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18L9 12L15 6"
                            stroke="#165166"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"/>
                    </svg>
            <span class="font-semibold text-[#165166]">Back</span>
        </button>

                <h1 class="text-[#4F6E79] font-montserrat text-[28px] font-bold" id="pageTitle">Package List</h1>
                <div class="flex items-center gap-4">
                    <div class="text-right">
                        <p class="text-[#4F6E79] font-montserrat text-lg font-bold">HANA BABILONIA</p>
                        <p class="text-[#4F6E79] font-montserrat text-sm font-bold">STAFF</p>
                    </div>
                    <img src="https://api.builder.io/api/v1/image/assets/TEMP/3774189fa3b9b68f860561ca18da86cfd2079a71?width=122" alt="Profile" class="w-[61px] h-[61px] rounded-full">
                </div>
            </header>

            <!-- Page Content -->
            <main class="p-8">
                <div class="space-y-6">
                    <!-- Tab Switcher and Search -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-0">
                            <button onclick="switchTab('package')" id="packageTab" class="px-6 h-[30px] rounded-l-[17px] bg-[#FFE8AD] text-[#4F6E79] font-segoe text-sm font-semibold transition-colors">Package</button>
                            <button onclick="switchTab('addon')" id="addonTab" class="px-6 h-[30px] rounded-r-[17px] bg-white text-[#FFE8AD] border-2 border-[#FFE8AD] font-segoe text-sm font-semibold transition-colors">Addon</button>
                        </div>

                        <!-- Search Bar -->
                        <div class="flex items-center gap-2 bg-white rounded-2xl px-4 py-2 w-[374px] border border-gray-200">
                            <svg class="w-4 h-4 text-[#ABB7C2]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                            <input type="text" id="searchInput" placeholder="Search ..." class="border-0 p-0 text-sm text-[#ABB7C2] flex-1 focus:outline-none">
                            <svg class="w-4 h-4 text-[#165166]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h4.586a1 1 0 011.414.414l9.586 9.586a1 1 0 010 1.414l-9.586 9.586a1 1 0 01-1.414-.414l-9.586-9.586A1 1 0 013 4z"></path></svg>
                        </div>
                    </div>

                    <!-- Grid Container -->
                    <div id="gridContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-[1029px]">
                        <!-- Items will be inserted here by JavaScript -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Create Modal -->
    <div id="createModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 w-[500px] max-h-[90vh] overflow-y-auto space-y-4 shadow-xl">
            <div class="flex items-center justify-between">
                <h3 class="text-[#4F6E79] font-segoe text-base font-bold" id="createModalTitle">Create Package</h3>
                <button onclick="closeCreateModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Package Form Fields -->
            <div id="packageFormFields" class="space-y-4">
                <input id="createName" type="text" placeholder="Enter Package Name" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">

                <div class="flex items-center gap-2">
                    <label class="flex items-center justify-center h-[30px] px-4 rounded-md shadow-[2px_2px_1px_0_rgba(0,0,0,0.25)] cursor-pointer hover:bg-gray-50 bg-white border border-gray-200">
                        <span class="text-[#4F6E79] font-segoe text-xs font-semibold">Upload a Photo</span>
                        <input id="createPhoto" type="file" accept="image/*" class="hidden">
                    </label>
                    <span id="createPhotoName" class="text-[#A2A2A2] text-xs">photo.png</span>
                </div>

                <div class="space-y-2">
                    <h4 class="text-[#4F6E79] font-segoe text-sm font-semibold">Inclusions</h4>
                    <div class="space-y-2 max-h-[200px] overflow-y-auto" id="inclusionsContainer"></div>
                    <button onclick="addInclusionField()" class="w-16 h-8 border border-dashed border-[#165166]/50 rounded text-[#165166]/50 text-base hover:border-[#165166] hover:text-[#165166]">+</button>
                </div>
            </div>

            <!-- Addon Form Fields -->
            <div id="addonFormFields" class="hidden space-y-4">
                <input id="createAddonName" type="text" placeholder="Enter Addon Name" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">

                <div class="space-y-1">
                    <label class="text-[#4F6E79] font-segoe text-sm font-semibold">Price</label>
                    <input id="createAddonPrice" type="text" placeholder="Enter Addon Price" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">
                </div>

                <div class="space-y-1">
                    <label class="text-[#4F6E79] font-segoe text-sm font-semibold">Comment</label>
                    <textarea id="createAddonComment" placeholder="Description / Note" maxlength="75" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs min-h-[64px] focus:outline-none focus:ring-2 focus:ring-[#165166]"></textarea>
                    <p class="text-right text-[#A2A2A2] text-xs"><span id="commentCount">0</span>/75</p>
                </div>
            </div>

            <div class="flex justify-end gap-2">
                <button onclick="closeCreateModal()" class="rounded-full border border-[#165166] text-[#165166] text-xs h-[30px] px-6 shadow-[2px_2px_2px_0_rgba(97,97,97,0.5)] hover:bg-gray-50">Discard</button>
                <button onclick="saveCreateItem()" class="rounded-full bg-[#165166] text-white text-xs h-[30px] px-6 shadow-[2px_2px_2px_0_rgba(97,97,97,0.5)] hover:bg-[#134152]" id="createSaveBtn">Save</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 w-[500px] max-h-[90vh] overflow-y-auto space-y-4 shadow-xl">
            <div class="flex items-center justify-between">
                <h3 class="text-[#4F6E79] font-segoe text-base font-bold" id="editModalTitle">Edit Package</h3>
                <button onclick="closeEditModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Package Form Fields -->
            <div id="editPackageFields" class="space-y-4">
                <input id="editName" type="text" placeholder="Enter Package Name" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">

                <div class="flex items-center gap-2">
                    <label class="flex items-center justify-center h-[30px] px-4 rounded-md shadow-[2px_2px_1px_0_rgba(0,0,0,0.25)] cursor-pointer hover:bg-gray-50 bg-white border border-gray-200">
                        <span class="text-[#4F6E79] font-segoe text-xs font-semibold">Upload a Photo</span>
                        <input id="editPhoto" type="file" accept="image/*" class="hidden">
                    </label>
                    <span class="text-[#A2A2A2] text-xs">photo.png</span>
                </div>

                <div class="space-y-2">
                    <h4 class="text-[#4F6E79] font-segoe text-sm font-semibold">Inclusions</h4>
                    <div class="space-y-2 max-h-[200px] overflow-y-auto" id="editInclusionsContainer"></div>
                    <button onclick="addEditInclusionField()" class="w-16 h-8 border border-dashed border-[#165166]/50 rounded text-[#165166]/50 text-base hover:border-[#165166] hover:text-[#165166]">+</button>
                </div>
            </div>

            <!-- Addon Form Fields -->
            <div id="editAddonFields" class="hidden space-y-4">
                <input id="editAddonName" type="text" placeholder="Enter Addon Name" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">

                <div class="space-y-1">
                    <label class="text-[#4F6E79] font-segoe text-sm font-semibold">Price</label>
                    <input id="editAddonPrice" type="text" placeholder="Enter Addon Price" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">
                </div>

                <div class="space-y-1">
                    <label class="text-[#4F6E79] font-segoe text-sm font-semibold">Comment</label>
                    <textarea id="editAddonComment" placeholder="Description / Note" maxlength="75" class="w-full border border-[#A2A2A2] rounded-md px-3 py-2 text-xs min-h-[64px] focus:outline-none focus:ring-2 focus:ring-[#165166]"></textarea>
                    <p class="text-right text-[#A2A2A2] text-xs"><span id="editCommentCount">0</span>/75</p>
                </div>
            </div>

            <div class="flex justify-between items-center" id="editModalActions">
                <button onclick="deleteItem()" class="rounded-full bg-red-500 text-white text-xs h-[30px] px-6 shadow-[2px_2px_2px_0_rgba(97,97,97,0.5)] hover:bg-red-600">Delete</button>
                <div class="flex gap-2">
                    <button onclick="closeEditModal()" class="rounded-full border border-[#165166] text-[#165166] text-xs h-[30px] px-6 shadow-[2px_2px_2px_0_rgba(97,97,97,0.5)] hover:bg-gray-50">Discard</button>
                    <button onclick="saveEditItem()" class="rounded-full bg-[#165166] text-white text-xs h-[30px] px-6 shadow-[2px_2px_2px_0_rgba(97,97,97,0.5)] hover:bg-[#134152]" id="editSaveBtn">Save</button>
                </div>
            </div>
        </div>
        
    </div>

    <script src="../scripts/heigen-api.js"></script>
    <script src="../scripts/heigen-app.js"></script>

    <script>
        function goBackToPackages() {
            window.location.href = "packages.html";
        }

        function toggleMobileSidebar(show) {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            if (show) {
                sidebar.classList.add('mobile-open');
                overlay.classList.add('show');
            } else {
                sidebar.classList.remove('mobile-open');
                overlay.classList.remove('show');
            }
        }

        function navigateTo(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => {
                s.classList.remove('active');
            });
            
            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            const selectedSection = document.getElementById(section);
            if (selectedSection) {
                selectedSection.classList.add('active');
            }
            
            // Set active nav item
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, index) => {
                if (section === 'dashboard' && index === 0) {
                    item.classList.add('active');
                } else if (section === 'customer-data' && index === 1) {
                    item.classList.add('active');
                } else if (section === 'package-list' && index === 2) {
                    item.classList.add('active');
                } else if (section === 'survey-form' && index === 3) {
                    item.classList.add('active');
                } else if (section === 'edit-profile' && index === 5) {
                    item.classList.add('active');
                } else if (section === 'logout' && index === 6) {
                    item.classList.add('active');
                }
            });
            
        }
                let currentTab = 'package';
        let packages = [];
        let addons = [];
        let editingItemId = null;
        let categoryName = '';

        // Initialize data
        function initializeData() {
            const params = new URLSearchParams(window.location.search);
            categoryName = params.get('category') ? decodeURIComponent(params.get('category')) : 'REGULAR SELF-PORTRAIT';
            document.getElementById('pageTitle').textContent = `Package List - ${categoryName}`;

            const defaultPackages = [
                { id: 1, name: "ECSTASY", price: "₱249.00", image: "https://api.builder.io/api/v1/image/assets/TEMP/5b9fb9f4dc0f35f1e347009fc13d773271d54b2f?width=648", details: ["1-2 pax", "7 minutes studio session w/ unlimited shots"] },
                { id: 2, name: "DELIGHT", price: "₱299.00", image: "https://api.builder.io/api/v1/image/assets/TEMP/b21b09c56e827214769e22780e8ecaab7d3cd05d?width=648", details: ["1-2 pax", "10 minutes studio session w/ unlimited"] },
                { id: 3, name: "ALLURE", price: "₱499.00", image: "https://api.builder.io/api/v1/image/assets/TEMP/b4678088ec86288ac5ec41306aadb28e2b878033?width=648", details: ["1-3 pax", "20 minutes of studio session w/ unlimited"] },
                { id: 4, name: "ADORE", price: "₱699.00", image: "https://api.builder.io/api/v1/image/assets/TEMP/b4678088ec86288ac5ec41306aadb28e2b878033?width=648", details: ["Strictly for 2 pax only", "30 minutes of studio session w/ unlimited"] },
                { id: 5, name: "TREASURE", price: "₱899.00", image: "https://api.builder.io/api/v1/image/assets/TEMP/1fa56c4c3e211f52df3e6292b170aedccd802ebb?width=648", details: ["1-5 pax", "30 minutes of studio session w/ unlimited"] },
                { id: 6, name: "PRICELESS", price: "₱1799.00", image: "https://api.builder.io/api/v1/image/assets/TEMP/e24319f4059a42cab7e1105c62df3dd8b9f06aa4?width=648", details: ["1-10 pax", "1 hour of studio session w/ unlimited shots"] },
            ];

            const defaultAddons = [
                { id: 1, name: "ONESIE", price: "₱249.00", description: "Onesie yung costume na malopit" },
                { id: 2, name: "ONESIE", price: "₱249.00", description: "Onesie yung costume na malopit" },
                { id: 3, name: "ONESIE", price: "₱249.00", description: "Onesie yung costume na malopit" },
                { id: 4, name: "ONESIE", price: "₱249.00", description: "Onesie yung costume na malopit" },
                { id: 5, name: "ONESIE", price: "₱249.00", description: "Onesie yung costume na malopit" },
                { id: 6, name: "ONESIE", price: "₱249.00", description: "Onesie yung costume na malopit" },
                { id: 7, name: "ONESIE", price: "₱249.00", description: "Onesie yung costume na malopit" },
            ];

            const savedPackages = localStorage.getItem(`packages_${categoryName}`);
            const savedAddons = localStorage.getItem(`addons_${categoryName}`);

            packages = savedPackages ? JSON.parse(savedPackages) : defaultPackages;
            addons = savedAddons ? JSON.parse(savedAddons) : defaultAddons;

            initializeInclusions();
        }

        function initializeInclusions() {
            if (packages.length === 0) {
                packages.push({ id: 1, name: "ECSTASY", price: "₱249.00", image: "https://api.builder.io/api/v1/image/assets/TEMP/5b9fb9f4dc0f35f1e347009fc13d773271d54b2f?width=648", details: ["1-2 pax", "7 minutes studio session w/ unlimited shots"] });
            }
        }

        function saveToLocalStorage() {
            localStorage.setItem(`packages_${categoryName}`, JSON.stringify(packages));
            localStorage.setItem(`addons_${categoryName}`, JSON.stringify(addons));
        }

        function switchTab(tab) {
            currentTab = tab;
            document.getElementById('packageTab').className = tab === 'package' ? 'px-6 h-[30px] rounded-l-[17px] bg-[#FFE8AD] text-[#4F6E79] font-segoe text-sm font-semibold transition-colors' : 'px-6 h-[30px] rounded-l-[17px] bg-white text-[#FFE8AD] border-2 border-[#FFE8AD] font-segoe text-sm font-semibold transition-colors';
            document.getElementById('addonTab').className = tab === 'addon' ? 'px-6 h-[30px] rounded-r-[17px] bg-[#FFE8AD] text-[#4F6E79] font-segoe text-sm font-semibold transition-colors' : 'px-6 h-[30px] rounded-r-[17px] bg-white text-[#FFE8AD] border-2 border-[#FFE8AD] font-segoe text-sm font-semibold transition-colors';
            renderItems();
        }

        function renderItems() {
            const grid = document.getElementById('gridContainer');
            grid.innerHTML = '';

            const items = currentTab === 'package' ? packages : addons;

            items.forEach(item => {
                if (currentTab === 'package') {
                    const card = document.createElement('div');
                    card.className = 'flex flex-col rounded-2xl overflow-hidden bg-white shadow-sm';
                    card.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="w-full h-[156px] object-cover" onerror="this.src='https://api.builder.io/api/v1/image/assets/TEMP/5b9fb9f4dc0f35f1e347009fc13d773271d54b2f?width=648'">
                        <div class="p-4 space-y-2">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h3 class="text-[#4F6E79] font-segoe text-lg font-bold">${item.name}</h3>
                                    <p class="text-[#4F6E79] font-segoe text-sm font-bold">${item.price}</p>
                                </div>
                                <button onclick="openEditModal(${item.id}, 'package')" class="p-1 hover:bg-gray-100 rounded">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.43299 5.14706H4.16667C3.2462 5.14706 2.5 5.93714 2.5 6.91176V15.7353C2.5 16.7099 3.2462 17.5 4.16667 17.5H13.3334C14.2539 17.5 15.0001 16.7099 15.0001 15.7353V9.27681L11.7386 12.7301C11.4478 13.0381 11.0773 13.248 10.674 13.3334L8.43975 13.8065C6.98199 14.1152 5.69673 12.7544 5.98828 11.2109L6.43514 8.84519C6.5158 8.41815 6.71404 8.02595 7.00487 7.71801L9.43299 5.14706Z" fill="#4F6E79"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5387 3.59866C16.4542 3.38277 16.3303 3.18662 16.1742 3.02142C16.0182 2.85612 15.8329 2.72499 15.629 2.63552C15.4251 2.54605 15.2066 2.5 14.9859 2.5C14.7652 2.5 14.5466 2.54605 14.3427 2.63552C14.1388 2.72499 13.9536 2.85612 13.7975 3.02142L13.3426 3.50308L15.7193 6.01955L16.1742 5.53789C16.3303 5.3727 16.4542 5.17655 16.5387 4.96066C16.6232 4.74476 16.6667 4.51336 16.6667 4.27966C16.6667 4.04596 16.6232 3.81455 16.5387 3.59866ZM14.5408 7.26739L12.1641 4.75092L8.18338 8.96584C8.12522 9.02743 8.08557 9.10587 8.06944 9.19128L7.62258 11.557C7.56427 11.8657 7.82132 12.1378 8.11287 12.0761L10.3471 11.603C10.4278 11.5859 10.5019 11.5439 10.5601 11.4823L14.5408 7.26739Z" fill="#4F6E79"/></svg>
                                </button>
                            </div>
                            ${item.details.map(detail => `<p class="text-[#777] font-segoe text-sm">${detail}</p>`).join('')}
                            <button class="text-[#7DA3AC] font-segoe text-sm font-semibold hover:underline">Read more</button>
                        </div>
                    `;
                    grid.appendChild(card);
                } else {
                    const card = document.createElement('div');
                    card.className = 'flex flex-col p-4 rounded-2xl bg-white shadow-sm space-y-2';
                    card.innerHTML = `
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h3 class="text-[#4F6E79] font-segoe text-base font-bold">${item.name}</h3>
                                <p class="text-[#4F6E79] font-segoe text-xs font-bold">${item.price}</p>
                            </div>
                            <button onclick="openEditModal(${item.id}, 'addon')" class="p-1 hover:bg-gray-100 rounded">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.43299 5.14706H4.16667C3.2462 5.14706 2.5 5.93714 2.5 6.91176V15.7353C2.5 16.7099 3.2462 17.5 4.16667 17.5H13.3334C14.2539 17.5 15.0001 16.7099 15.0001 15.7353V9.27681L11.7386 12.7301C11.4478 13.0381 11.0773 13.248 10.674 13.3334L8.43975 13.8065C6.98199 14.1152 5.69673 12.7544 5.98828 11.2109L6.43514 8.84519C6.5158 8.41815 6.71404 8.02595 7.00487 7.71801L9.43299 5.14706Z" fill="#4F6E79"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5387 3.59866C16.4542 3.38277 16.3303 3.18662 16.1742 3.02142C16.0182 2.85612 15.8329 2.72499 15.629 2.63552C15.4251 2.54605 15.2066 2.5 14.9859 2.5C14.7652 2.5 14.5466 2.54605 14.3427 2.63552C14.1388 2.72499 13.9536 2.85612 13.7975 3.02142L13.3426 3.50308L15.7193 6.01955L16.1742 5.53789C16.3303 5.3727 16.4542 5.17655 16.5387 4.96066C16.6232 4.74476 16.6667 4.51336 16.6667 4.27966C16.6667 4.04596 16.6232 3.81455 16.5387 3.59866ZM14.5408 7.26739L12.1641 4.75092L8.18338 8.96584C8.12522 9.02743 8.08557 9.10587 8.06944 9.19128L7.62258 11.557C7.56427 11.8657 7.82132 12.1378 8.11287 12.0761L10.3471 11.603C10.4278 11.5859 10.5019 11.5439 10.5601 11.4823L14.5408 7.26739Z" fill="#4F6E79"/></svg>
                            </button>
                        </div>
                        <p class="text-[#777] font-segoe text-xs">${item.description}</p>
                    `;
                    grid.appendChild(card);
                }
            });

            // Add create button
            const createCard = document.createElement('button');
            createCard.onclick = () => openCreateModal(currentTab);
            createCard.className = `flex items-center justify-center rounded-2xl border-4 border-dashed border-[#BDDAE0] h-[${currentTab === 'package' ? '291' : '110'}px] hover:border-[#9DBAC0] transition-colors`;
            createCard.innerHTML = `<p class="text-[#BDDAE0] font-segoe text-base font-bold">${currentTab === 'package' ? 'CREATE PACKAGE' : 'NEW ADDON'}</p>`;
            grid.appendChild(createCard);
        }

        function openCreateModal(type) {
            currentTab = type;
            document.getElementById('createModalTitle').textContent = type === 'package' ? 'Create Package' : 'Create Addon';
            document.getElementById('createSaveBtn').textContent = type === 'package' ? 'Save' : 'Confirm';
            
            document.getElementById('packageFormFields').style.display = type === 'package' ? 'block' : 'none';
            document.getElementById('addonFormFields').style.display = type === 'addon' ? 'block' : 'none';

            if (type === 'package') {
                renderInclusionFields();
            }

            document.getElementById('createModal').classList.remove('hidden');
        }

        function closeCreateModal() {
            document.getElementById('createModal').classList.add('hidden');
            resetCreateForm();
        }

        function resetCreateForm() {
            document.getElementById('createName').value = '';
            document.getElementById('createPhoto').value = '';
            document.getElementById('createPhotoName').textContent = 'photo.png';
            document.getElementById('createAddonName').value = '';
            document.getElementById('createAddonPrice').value = '';
            document.getElementById('createAddonComment').value = '';
            document.getElementById('commentCount').textContent = '0';
            renderInclusionFields();
        }

        function renderInclusionFields() {
            const container = document.getElementById('inclusionsContainer');
            container.innerHTML = '';
            const inclusions = currentTab === 'package' ? [''] : [];
            inclusions.forEach((inc, idx) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'flex items-center gap-2';
                wrapper.innerHTML = `
                    <input type="text" placeholder="Enter inclusion" value="${inc}" data-idx="${idx}" class="flex-1 border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">
                    <button onclick="removeInclusionField(${idx})" class="p-1 text-[#A2A2A2] hover:text-red-500">
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                    </button>
                `;
                container.appendChild(wrapper);
            });
        }

        function addInclusionField() {
            renderInclusionFields();
            const inputs = document.querySelectorAll('#inclusionsContainer input');
            inputs[inputs.length - 1]?.focus();
        }

        function removeInclusionField(idx) {
            const inputs = document.querySelectorAll('#inclusionsContainer input');
            const values = Array.from(inputs).map(i => i.value).filter((_, i) => i !== idx);
            renderInclusionFields();
        }

        function saveCreateItem() {
            if (currentTab === 'package') {
                const name = document.getElementById('createName').value.trim();
                if (!name) {
                    alert('Please enter a package name');
                    return;
                }
                const inputs = document.querySelectorAll('#inclusionsContainer input');
                const details = Array.from(inputs).map(i => i.value).filter(v => v.trim());

                const newPackage = {
                    id: Math.max(...packages.map(p => p.id), 0) + 1,
                    name: name.toUpperCase(),
                    price: '₱0.00',
                    image: 'https://api.builder.io/api/v1/image/assets/TEMP/5b9fb9f4dc0f35f1e347009fc13d773271d54b2f?width=648',
                    details: details
                };

                packages.push(newPackage);
                saveToLocalStorage();
                renderItems();
                closeCreateModal();
            } else {
                const name = document.getElementById('createAddonName').value.trim();
                const price = document.getElementById('createAddonPrice').value.trim();
                if (!name || !price) {
                    alert('Please enter addon name and price');
                    return;
                }

                const newAddon = {
                    id: Math.max(...addons.map(a => a.id), 0) + 1,
                    name: name.toUpperCase(),
                    price: price,
                    description: document.getElementById('createAddonComment').value
                };

                addons.push(newAddon);
                saveToLocalStorage();
                renderItems();
                closeCreateModal();
            }
        }

        function openEditModal(itemId, type) {
            editingItemId = itemId;
            currentTab = type;
            document.getElementById('editModalTitle').textContent = type === 'package' ? 'Edit Package' : 'Edit Addon';
            document.getElementById('editSaveBtn').textContent = type === 'package' ? 'Save' : 'Confirm';

            document.getElementById('editPackageFields').style.display = type === 'package' ? 'block' : 'none';
            document.getElementById('editAddonFields').style.display = type === 'addon' ? 'block' : 'none';

            if (type === 'package') {
                const pkg = packages.find(p => p.id === itemId);
                if (pkg) {
                    document.getElementById('editName').value = pkg.name;
                    renderEditInclusionFields(pkg.details);
                }
            } else {
                const addon = addons.find(a => a.id === itemId);
                if (addon) {
                    document.getElementById('editAddonName').value = addon.name;
                    document.getElementById('editAddonPrice').value = addon.price;
                    document.getElementById('editAddonComment').value = addon.description;
                    updateEditCommentCount();
                }
            }

            document.getElementById('editModal').classList.remove('hidden');
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
            editingItemId = null;
        }

        function renderEditInclusionFields(details = []) {
            const container = document.getElementById('editInclusionsContainer');
            container.innerHTML = '';
            details.forEach((detail, idx) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'flex items-center gap-2';
                wrapper.innerHTML = `
                    <input type="text" placeholder="Enter inclusion" value="${detail}" data-idx="${idx}" class="flex-1 border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">
                    <button onclick="removeEditInclusionField(${idx})" class="p-1 text-[#A2A2A2] hover:text-red-500">
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                    </button>
                `;
                container.appendChild(wrapper);
            });
        }

        function addEditInclusionField() {
            const container = document.getElementById('editInclusionsContainer');
            const wrapper = document.createElement('div');
            wrapper.className = 'flex items-center gap-2';
            const newIdx = container.children.length;
            wrapper.innerHTML = `
                <input type="text" placeholder="Enter inclusion" data-idx="${newIdx}" class="flex-1 border border-[#A2A2A2] rounded-md px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-[#165166]">
                <button onclick="removeEditInclusionField(${newIdx})" class="p-1 text-[#A2A2A2] hover:text-red-500">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                </button>
            `;
            container.appendChild(wrapper);
            wrapper.querySelector('input').focus();
        }

        function removeEditInclusionField(idx) {
            const container = document.getElementById('editInclusionsContainer');
            if (container.children[idx]) {
                container.children[idx].remove();
            }
        }

        function updateEditCommentCount() {
            const textarea = document.getElementById('editAddonComment');
            document.getElementById('editCommentCount').textContent = textarea.value.length;
        }

        function saveEditItem() {
            if (currentTab === 'package') {
                const name = document.getElementById('editName').value.trim();
                if (!name) {
                    alert('Please enter a package name');
                    return;
                }
                const inputs = document.querySelectorAll('#editInclusionsContainer input');
                const details = Array.from(inputs).map(i => i.value).filter(v => v.trim());

                const pkg = packages.find(p => p.id === editingItemId);
                if (pkg) {
                    pkg.name = name.toUpperCase();
                    pkg.details = details;
                    saveToLocalStorage();
                    renderItems();
                    closeEditModal();
                }
            } else {
                const name = document.getElementById('editAddonName').value.trim();
                const price = document.getElementById('editAddonPrice').value.trim();
                if (!name || !price) {
                    alert('Please enter addon name and price');
                    return;
                }

                const addon = addons.find(a => a.id === editingItemId);
                if (addon) {
                    addon.name = name.toUpperCase();
                    addon.price = price;
                    addon.description = document.getElementById('editAddonComment').value;
                    saveToLocalStorage();
                    renderItems();
                    closeEditModal();
                }
            }
        }

        function deleteItem() {
            if (confirm(`Are you sure you want to delete this ${currentTab}?`)) {
                if (currentTab === 'package') {
                    packages = packages.filter(p => p.id !== editingItemId);
                } else {
                    addons = addons.filter(a => a.id !== editingItemId);
                }
                saveToLocalStorage();
                renderItems();
                closeEditModal();
            }
        }

        // Event listeners
        document.getElementById('createAddonComment')?.addEventListener('input', (e) => {
            document.getElementById('commentCount').textContent = e.target.value.length;
        });

        document.getElementById('editAddonComment')?.addEventListener('input', updateEditCommentCount);

        document.getElementById('createPhoto')?.addEventListener('change', function(e) {
            if (this.files && this.files[0]) {
                document.getElementById('createPhotoName').textContent = this.files[0].name;
            }
        });

        document.getElementById('editPhoto')?.addEventListener('change', function(e) {
            if (this.files && this.files[0]) {
                document.querySelector('#editModal .text-[#A2A2A2]').textContent = this.files[0].name;
            }
        });

        // Initialize
        initializeData();
        renderItems();
    </script>
</body>
</html>
